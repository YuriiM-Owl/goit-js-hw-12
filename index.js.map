{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46396055-d69cef0b7d1de44edfbae421d';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport const searchImages = async (query, page = 1) => {\n  const options = {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: PER_PAGE,\n    },\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, options);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n","export const imageCard = array =>\n  array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n<li class=\"gallery-item\">\n  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n    <img src=\"${webformatURL}\" class=\"gallery-image\" alt=\"${tags}\" />\n  </a>\n  <div class=\"item-info\">\n    <div class=\"stats-box\">\n      <p class=\"stat\">Likes</p>\n      <p class=\"stat-value\">${likes}</p>\n    </div>\n    <div class=\"stats-box\">\n      <p class=\"stat\">Views</p>\n      <p class=\"stat-value\">${views}</p>\n    </div>\n    <div class=\"stats-box\">\n      <p class=\"stat\">Comments</p>\n      <p class=\"stat-value\">${comments}</p>\n    </div>\n    <div class=\"stats-box\">\n      <p class=\"stat\">Downloads</p>\n      <p class=\"stat-value\">${downloads}</p>\n    </div>\n  </div>\n</li>`\n    )\n    .join('');\n","import { searchImages } from './js/pixabay-api.js';\nimport { imageCard } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.search-form');\nconst loaderElement = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nconst iziWarning = () =>\n  iziToast.show({\n    message: 'Input is empty!',\n    position: 'topRight',\n    backgroundColor: 'orangered',\n    messageSize: '16',\n    messageColor: '#fff',\n    theme: 'dark',\n    maxWidth: '432px',\n    icon: 'ico-warning',\n  });\n\nconst iziError = () =>\n  iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageSize: '16',\n    messageColor: '#fff',\n    theme: 'dark',\n    maxWidth: '432px',\n    icon: 'ico-error',\n  });\n\nconst iziEndOfResults = () =>\n  iziToast.show({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageSize: '16',\n    messageColor: '#fff',\n    theme: 'dark',\n    maxWidth: '432px',\n    icon: 'ico-warning',\n  });\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst showLoader = () => loaderElement.classList.remove('hidden');\nconst hideLoader = () => loaderElement.classList.add('hidden');\nconst showLoadMoreBtn = () => loadMoreBtn.classList.remove('hidden');\nconst hideLoadMoreBtn = () => loadMoreBtn.classList.add('hidden');\n\nconst fetchAndRenderImages = async (shouldScroll = false) => {\n  try {\n    showLoader();\n    const data = await searchImages(query, page);\n\n    if (data.hits.length === 0 && page === 1) {\n      hideLoadMoreBtn();\n      iziError();\n      return;\n    }\n\n    totalHits = data.totalHits;\n    gallery.insertAdjacentHTML('beforeend', imageCard(data.hits));\n    lightbox.refresh();\n\n    if (gallery.children.length < totalHits) {\n      showLoadMoreBtn();\n    } else {\n      hideLoadMoreBtn();\n      iziEndOfResults();\n    }\n\n    if (shouldScroll) {\n      scrollToNewImages();\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n};\n\nconst scrollToNewImages = () => {\n  const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nconst handleForm = event => {\n  event.preventDefault();\n  query = event.currentTarget.elements['text-request'].value\n    .toLowerCase()\n    .trim();\n\n  if (!query) {\n    return iziWarning();\n  }\n\n  page = 1;\n  gallery.innerHTML = '';\n  hideLoadMoreBtn();\n  fetchAndRenderImages();\n  form.reset();\n};\n\nconst handleLoadMore = () => {\n  page += 1;\n  fetchAndRenderImages(true);\n};\n\nform.addEventListener('submit', handleForm);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n"],"names":["API_KEY","BASE_URL","PER_PAGE","searchImages","query","page","options","axios","error","imageCard","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","form","loaderElement","loadMoreBtn","totalHits","iziWarning","iziToast","iziError","iziEndOfResults","lightbox","SimpleLightbox","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","fetchAndRenderImages","shouldScroll","data","scrollToNewImages","cardHeight","handleForm","event","handleLoadMore"],"mappings":"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"}